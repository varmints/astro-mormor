---
import { Image } from "@astrojs/image/components";
const { feed } = Astro.props;
---

<ul
  class="behold-gallery-wall grid w-full max-w-6xl grid-cols-2 gap-4 sm:grid-cols-3 md:gap-6"
>
  {
    feed.map((item: any) => (
      <li class="relative aspect-square">
        <a
          class="behold-gw-post behold-gw-post--has-row-gap behold-gw-post--hover-icon behold-gw-post--small behold-gw-post--loaded relative"
          href={item.permalink}
          target="_blank"
        >
          <Image
            src={item.mediaUrl}
            class="behold-gw-image h-full w-full object-cover"
            width={500}
            height={500}
            format="webp"
            quality={80}
            alt="instagram feed"
          />
        </a>
      </li>
    ))
  }
</ul>

<style>
  .behold-gallery-wall {
    --icon-instagram: url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' viewBox='0 0 35 35' enable-background='new 0 0 35 35' xml:space='preserve'%3E%3Cpath fill='%23FFFFFF' d='M17.6,3.2c4.7,0,5.2,0,7.1,0.1c1.7,0.1,2.6,0.4,3.2,0.6c0.8,0.3,1.4,0.7,2,1.3c0.6,0.6,1,1.2,1.3,2 c0.2,0.6,0.5,1.5,0.6,3.3c0.1,1.8,0.1,2.4,0.1,7.1s0,5.2-0.1,7.1c-0.1,1.7-0.4,2.6-0.6,3.2c-0.6,1.5-1.8,2.7-3.3,3.3 c-0.6,0.2-1.5,0.5-3.2,0.6c-1.8,0.1-2.4,0.1-7.1,0.1s-5.2,0-7.1-0.1c-1.7-0.1-2.6-0.4-3.2-0.6c-0.8-0.3-1.4-0.7-2-1.3 c-0.6-0.6-1-1.2-1.3-2c-0.2-0.6-0.5-1.5-0.6-3.2c-0.1-1.8-0.1-2.4-0.1-7.1s0-5.2,0.1-7.1C3.4,8.7,3.7,7.8,4,7.2 c0.3-0.8,0.7-1.4,1.3-2c0.6-0.6,1.2-1,2-1.3c0.6-0.2,1.5-0.5,3.2-0.6C12.4,3.2,12.9,3.2,17.6,3.2 M17.6,0c-4.8,0-5.3,0-7.2,0.1 C8.5,0.2,7.2,0.5,6.1,0.9C5,1.4,3.9,2,3,2.9C2.1,3.8,1.5,4.9,1,6c-0.4,1.1-0.7,2.4-0.8,4.2c-0.1,1.9-0.1,2.5-0.1,7.2s0,5.3,0.1,7.2 C0.3,26.6,0.6,27.8,1,29c0.4,1.2,1.1,2.2,2,3.1c0.9,0.9,1.9,1.6,3.1,2c1.1,0.4,2.4,0.7,4.2,0.8s2.5,0.1,7.2,0.1s5.3,0,7.2-0.1 c1.9-0.1,3.1-0.4,4.2-0.8c2.3-0.9,4.2-2.8,5.1-5.1c0.4-1.1,0.7-2.4,0.8-4.2c0.1-1.9,0.1-2.5,0.1-7.2s0-5.3-0.1-7.2 c-0.1-1.9-0.4-3.1-0.8-4.2c-0.4-1.2-1.1-2.2-2-3.1c-0.9-0.9-1.9-1.6-3.1-2c-1.1-0.4-2.4-0.7-4.2-0.8C22.9,0,22.3,0,17.6,0L17.6,0 L17.6,0z'/%3E%3Cpath fill='%23FFFFFF' d='M17.6,8.5c-5,0-9,4-9,9s4,9,9,9s9-4,9-9l0,0C26.6,12.5,22.6,8.5,17.6,8.5z M17.6,23.3 c-3.2,0-5.8-2.6-5.8-5.8s2.6-5.8,5.8-5.8s5.8,2.6,5.8,5.8S20.8,23.3,17.6,23.3z'/%3E%3Ccircle fill='%23FFFFFF' cx='26.9' cy='8.2' r='2.1'/%3E%3C/svg%3E");
  }
  .behold-gallery-wall img {
    transition: 0.8s opacity;
  }
  .behold-gallery-wall:hover img {
    opacity: 0.5;
  }
  .behold-gallery-wall:hover img:hover {
    opacity: 1;
  }
  .behold-gw-post {
    @apply rounded-xl;
  }
  .behold-gw-post::before,
  .behold-gw-post::after {
    content: "";
    position: absolute;
    pointer-events: none;
  }
  .behold-gw-post::before {
    z-index: 2;
    top: 0;
    left: 0;
    height: 100%;
    width: 100%;
    background-color: rgba(0, 0, 0, 0);
    transition: all 2s cubic-bezier(0.215, 0.61, 0.355, 1);
  }
  .behold-gw-post.behold-gw-post--hover-icon::after {
    z-index: 3;
    height: 12%;
    max-height: 30px;
    min-height: 22px;
    width: 100%;
    top: 50%;
    left: 0%;
    background-image: var(--icon-instagram);
    background-position: center center;
    background-repeat: no-repeat;
    background-size: auto 100%;
    opacity: 0;
    transform: translateY(-50%) scale(0.75);
    will-change: transform;
    transition: all 0.6s cubic-bezier(0.215, 0.61, 0.355, 1);
  }
  .behold-gw-post:hover .behold-gw-image {
    transform: scale(1.05);
  }

  img.behold-gw-image {
    opacity: 1;
    position: absolute;
    z-index: 1;
    top: 0;
    left: 0;
    transition: all 0.6s cubic-bezier(0.215, 0.61, 0.355, 1), opacity 0.6s ease;
    will-change: transform;
    object-fit: cover;
    object-position: center center;
  }

  .behold-gw-post {
    position: absolute;
    inset: 0;
    display: block;
    overflow: hidden;
    user-select: none;
    transform-origin: top left;
  }

  .behold-gw-post:hover::after {
    opacity: 1;
    transform: translateY(-50%);
  }
</style>
